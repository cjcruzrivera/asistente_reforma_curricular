{% extends 'base.html' %} {% load staticfiles %} {% block content %}
<div style="background-color: #E1E1E1">
    <section id="formulario">
        <div style="background-color: #FFFFFF" class="col-md-12 mx-auto">
            <div id="iniciar" class="panel-group">
                <h2 class="text-center" style="font-size: 40px" >{{curso.nombre}}</h2>

                    <div style="float: right;">
                        <a class="btn btn-primary" href="{% url 'curso:curso_listar' %}">
                            <i class='icon-reply icon-large'></i> Cursos</a>
                    </div>
                    <br>
                    <br>
                    <hr>
                    <table id="curso" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <td hidden>id</td>
                                <td style="color: black">Codigo</td>
                                <td style="color: black">Nombre</td>
                                <td style="color: black">Creditos</td>
                                <td style="color: black">Horas de clase magistral</td>
                                <td style="color: black">Horas de estudio individual</td>
                                <td style="color: black">Tipo de curso</td>
                                <td style="color: black">Validable</td>
                                <td style="color: black">Habilitable</td>
                                <td style="color: black">Programa</td>
                                <td class="text-center" style="width: 130px"> Competencias</td>

                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td hidden> {{curso.id}} </td>
                                <td>{{ curso.codigo }}</td>
                                <td>{{ curso.nombre }}</td>
                                <td>{{ curso.creditos }}</td>
                                <td>{{ curso.horas_catedra }}</td>
                                <td>{{ curso.horas_individual }}</td>
                                <td>{{ curso.tipo.nombre }}</td>
                                <td>
                                    {% if curso.validable %} SI {% else %} NO {% endif %}
                                </td>
                                <td>
                                    {% if curso.habilitable %} SI {% else %} NO {% endif %}
                                </td>
                                <td>{{ curso.programa.nombre }}</td>


                                <td class="text-center" style="padding: 10px 10px 10px 10px">
                                    <a class="btn btn-primary btn-sm" href="{% url 'competencia:competencia_listar' curso.id %}">
                                        <img src="{% static 'images/reporte.png' %}" alt="">
                                    </a>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                    {% if prerrequisitos %}
                    <h3>Prerrequisitos</h3>
                    <div style="float: right;">
                        <button type="button" data-toggle="modal" data-target="#myModal" class="btn btn-primary">
                            <i class='icon-plus-sign-alt icon-large'></i> Registrar prerrequisitos</button>
                    </div>

                    <table id="cursos" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <td hidden>id</td>
                                <td style="color: black">Codigo del curso</td>
                                <td style="color: black">Nombre</td>
                                <td style="color: black">Creditos</td>
                                <td style="color: black">Validable</td>
                                <td style="color: black">Habilitable</td>
                                <td style="color: black">Programa</td>

                            </tr>
                        </thead>
                        <tbody>
                            {% for pre in prerrequisitos %} {% if pre.estado %}
                            <tr>
                                <td hidden> {{pre.id}} </td>
                                <td>{{ pre.codigo }}</td>
                                <td>{{ pre.nombre }}</td>
                                <td>{{ pre.creditos }}</td>
                                <td>
                                    {% if pre.validable %} SI {% else %} NO {% endif %}
                                </td>
                                <td>
                                    {% if pre.habilitable %} SI {% else %} NO {% endif %}
                                </td>
                                <td>{{ pre.programa.nombre }}</td>

                            </tr>
                            {% endif %} {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <div class="container">
                        <h4 style="float: left;">El curso no registra prerrequisitos</h4>

                        <div style="float: right;">
                            <button type="button" data-toggle="modal" data-target="#myModal"  class="btn btn-primary">
                                <i class='icon-plus-sign-alt icon-large'></i> Registrar prerrequisitos</button>
                        </div>
                    </div>
                    <br>
                    <hr> {% endif %}
            </div>
        </div>
    </section>
</div>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">PRERREQUISITOS</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <label class="control-label">Seleccione materia prerrequisito</label>
                    <hr>
                    <select class="form-control" name="prerreq" id="prerreq">
                        <option value="0">----------</option>
                        {% for pos in posibles_pre %}
                            <option value="{{pos.id}}">{{pos.nombre}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="guardar" type="button" data-course='{{curso.id}}' class="btn btn-success">Guardar</button>
                <button type="button" class="btn btn-warning" data-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extrajs %}
<script src="{% static 'js/curso_view.js' %}"></script>
{% endblock %}